<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Raila Odinga — Leadership Tribute</title>
<link rel="icon" href="https://files.catbox.moe/e3bp2l.jpg" type="image/jpeg">
<style>
  /* --- reset --- */
  *{box-sizing:border-box;margin:0;padding:0}
  html,body{height:100%}
  body{
    font-family:"Segoe UI",SegoeUI,Roboto,Arial,sans-serif;
    background:#020202;color:#efe7d7;
    display:flex;flex-direction:column;align-items:center;min-height:100vh;
    overflow-x:hidden;-webkit-font-smoothing:antialiased;
  }

  /* --- background layers --- */
  .flag-wrap{position:fixed;inset:0;z-index:0;pointer-events:none;overflow:hidden}
  .flag{
    position:absolute;left:-12%;top:-10%;width:124%;height:120%;
    background-image:url('https://upload.wikimedia.org/wikipedia/commons/4/49/Flag_of_Kenya.svg');
    background-size:150%;background-position:center;opacity:0.20;
    filter:blur(1px) saturate(0.85) contrast(0.95);animation:flagWave 14s ease-in-out infinite;
    mix-blend-mode:screen;
  }
  @keyframes flagWave{
    0%{transform:translate3d(-3px,0,0) rotateY(-1deg) scale(1.02);background-position:47% 50%}
    50%{transform:translate3d(3px,-4px,0) rotateY(1deg) scale(1.01);background-position:53% 49%}
    100%{transform:translate3d(-3px,0,0) rotateY(-1deg) scale(1.02);background-position:47% 50%}
  }

  .vignette{position:fixed;inset:0;z-index:2;pointer-events:none;
    background:radial-gradient(60% 60% at 50% 42%,rgba(0,0,0,0)0%,rgba(0,0,0,0.42)60%,rgba(0,0,0,0.86)100%);mix-blend-mode:multiply}
  .mist{position:fixed;inset:0;z-index:3;pointer-events:none;opacity:0.7;
    background:radial-gradient(circle at 40% 30%,rgba(255,230,200,0.02),transparent 20%),radial-gradient(circle at 70% 70%,rgba(255,200,120,0.01),transparent 18%);
    mix-blend-mode:screen;animation:drift 20s linear infinite}
  @keyframes drift{0%{transform:translateY(0)}50%{transform:translateY(-20px)}100%{transform:translateY(0)}}

  body::before{
    content:"";position:fixed;inset:0;background:url('https://i.imgur.com/hXh8fQq.png');background-size:cover;opacity:0.12;
    animation:particlesMove 60s linear infinite;z-index:1;pointer-events:none;
  }
  @keyframes particlesMove{0%{background-position:0 0}100%{background-position:0 -2000px}}

  .embers{position:fixed;inset:0;z-index:4;pointer-events:none;overflow:hidden}
  .ember{position:absolute;border-radius:50%;background:radial-gradient(circle at 30% 30%,rgba(255,230,170,1),rgba(255,170,40,0.95));box-shadow:0 8px 22px rgba(255,170,60,0.12);opacity:0;transform:translateY(0) scale(.6);animation:emberFloat linear infinite}
  @keyframes emberFloat{0%{transform:translateY(80vh) translateX(0) scale(.5);opacity:0}6%{opacity:1}60%{opacity:0.85}100%{transform:translateY(-20vh) translateX(60px) scale(1);opacity:0}}

  /* --- header controls --- */
  .topbar{position:relative;z-index:30;margin:18px 20px;width:calc(100% - 40px);display:flex;justify-content:space-between;align-items:center;max-width:1200px}
  .brand{color:#ffd985;font-weight:600;letter-spacing:0.2px}
  .controls{display:flex;gap:10px;align-items:center}
  .btn{background:linear-gradient(180deg,#2b2b2b,#141414);border:1px solid rgba(255,200,60,0.04);color:#efe7d7;padding:8px 12px;border-radius:8px;cursor:pointer;font-size:0.95rem;box-shadow:0 6px 18px rgba(0,0,0,0.6)}
  .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.05);color:#d9d0bf}

  /* --- welcome overlay --- */
  .welcome{position:fixed;inset:0;z-index:60;display:flex;align-items:center;justify-content:center;background:linear-gradient(180deg,rgba(0,0,0,0.95),rgba(0,0,0,0.98))}
  .welcome-card{text-align:center;color:#f6e9c7;padding:34px;border-radius:12px;background:linear-gradient(180deg,rgba(8,6,4,0.72),rgba(12,10,8,0.3));border:1px solid rgba(255,200,60,0.04);box-shadow:0 30px 90px rgba(0,0,0,0.8);max-width:880px}
  .welcome-title{font-size:clamp(1.2rem,3vw,2rem);color:#ffd985;margin-bottom:10px;text-shadow:0 8px 30px rgba(0,0,0,0.6)}
  .welcome-sub{color:#d7cfc0;margin-bottom:18px;font-size:1rem}
  .enter-anim{display:inline-block;width:64px;height:64px;border-radius:12px;background:linear-gradient(180deg,#ffd77a,#f0a500);box-shadow:0 12px 30px rgba(240,165,0,0.14) inset,0 6px 30px rgba(0,0,0,0.6);margin-top:8px}
  .intro-phrase{position:absolute;bottom:20%;width:100%;text-align:center;font-size:1.2rem;color:#f6e9c7;opacity:0;animation:introFade 4s ease-in-out forwards 1.2s}
  @keyframes introFade{0%{opacity:0;transform:translateY(20px)}40%{opacity:1;transform:translateY(0)}80%{opacity:1}100%{opacity:0}}

  /* --- main card / tribute --- */
  .stage{z-index:10;position:relative;width:min(1100px,94vw);max-width:1200px;margin-top:10px}
  .card{width:100%;background:linear-gradient(180deg,rgba(6,6,6,0.62),rgba(10,8,6,0.28));border-radius:14px;padding:28px;display:flex;flex-direction:column;gap:18px;align-items:center;box-shadow:0 30px 80px rgba(0,0,0,0.72),inset 0 0 60px rgba(255,200,60,0.02);border:1px solid rgba(255,200,60,0.04);backdrop-filter:blur(6px) saturate(1.05);transform:translateY(24px);opacity:0;transition:opacity 1s ease,transform 1s cubic-bezier(.2,.9,.2,1);z-index:11}

  .tribute-title{font-size:1.6rem;font-weight:600;color:#ffd985;text-align:center;margin-bottom:4px;text-shadow:0 0 10px rgba(255,200,60,0.18);opacity:0;animation:titleFade 2s ease forwards 1.4s}
  @keyframes titleFade{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}

  /* portrait */
  .portrait-rect{width:720px;max-width:86vw;height:300px;background:linear-gradient(180deg,#111,#0b0b0b);border-radius:10px;border:6px solid rgba(255,205,90,0.06);box-shadow:0 24px 60px rgba(0,0,0,0.7),0 0 36px rgba(255,200,60,0.04);display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}
  .portrait-rect img{width:100%;height:100%;object-fit:cover;display:block}
  .portrait-rect .overlay-label{position:absolute;left:14px;bottom:12px;background:rgba(0,0,0,0.45);padding:6px 10px;border-radius:8px;font-size:0.85rem;color:#f3e2c0}

  /* candles + quote */
  .candles{display:flex;gap:22px;margin-top:12px;justify-content:center;width:100%}
  .candle{width:66px;height:120px;background:linear-gradient(180deg,#0d0d0d,#1c140b);border-radius:12px;position:relative;box-shadow:0 12px 26px rgba(0,0,0,0.6),inset 0 -10px 30px rgba(255,200,60,0.02);display:flex;align-items:flex-start;justify-content:center}
  .wax{position:absolute;bottom:18px;width:46px;height:84px;background:linear-gradient(180deg,#f9e6b8,#f1c57a);border-radius:8px;box-shadow:inset 0 -6px 12px rgba(0,0,0,0.06)}
  .wick{position:absolute;bottom:94px;width:3px;height:18px;background:#0b0b0b;border-radius:2px;left:50%;transform:translateX(-50%);z-index:3}
  .flame{position:absolute;bottom:106px;left:50%;transform:translateX(-50%);width:22px;height:36px;border-radius:50% 50% 40% 40%;background:radial-gradient(circle at 30% 25%,rgba(255,245,210,1),rgba(255,200,60,0.95)40%,rgba(255,140,30,0.6)60%,rgba(255,100,20,0.15)80%);filter:drop-shadow(0 0 12px rgba(255,180,60,0.6));animation:flameFlicker 1.6s infinite ease-in-out;z-index:4}
  .flame::after{content:"";position:absolute;left:50%;top:30%;transform:translate(-50%,-20%);width:8px;height:12px;border-radius:50%;background:radial-gradient(circle at 30% 30%,#fff7d7,rgba(255,230,160,0.9));filter:blur(0.2px)}
  @keyframes flameFlicker{0%{transform:translateX(-50%) translateY(0) scaleY(1);opacity:1}50%{transform:translateX(-50%) translateY(-3px) scaleY(1.06);opacity:0.98}100%{transform:translateX(-50%) translateY(0) scaleY(1);opacity:1}}

  .quote{margin-top:10px;font-size:1.06rem;color:#f3eac2;text-align:center;font-style:italic;opacity:0;transform:translateY(10px);transition:opacity .9s ease,transform .9s ease}
  .quote.visible{opacity:1;transform:translateY(0)}
  .note{font-size:0.9rem;color:#bdaf97;margin-top:6px}

  /* --- details area (biography + timeline + gallery) --- */
  .details{width:100%;max-width:1200px;margin:18px 0 60px 0;z-index:12;padding:18px 20px;display:grid;grid-template-columns:1fr 420px;gap:18px;align-items:start}
  .bio{background:linear-gradient(180deg,rgba(10,10,10,0.6),rgba(8,8,8,0.35));padding:18px;border-radius:12px;border:1px solid rgba(255,200,60,0.03);box-shadow:0 18px 40px rgba(0,0,0,0.6)}
  .bio h2{color:#ffd985;margin-bottom:8px}
  .bio p{color:#e9dcc2;line-height:1.5;font-size:0.98rem}
  .timeline{margin-top:12px;background:transparent}
  .timeline-item{padding:12px 10px;border-left:3px solid rgba(255,200,60,0.06);margin-bottom:10px}
  .timeline-item h3{font-size:1rem;color:#ffd985;margin-bottom:6px}
  .timeline-item p{font-size:0.92rem;color:#e8dcc3;line-height:1.35}

  .sidecard{background:linear-gradient(180deg,rgba(12,12,12,0.6),rgba(10,10,10,0.3));padding:14px;border-radius:12px;border:1px solid rgba(255,200,60,0.03);box-shadow:0 14px 30px rgba(0,0,0,0.6)}
  .stats-row{display:flex;gap:8px;flex-wrap:wrap}
  .stat{flex:1 1 48%;background:rgba(0,0,0,0.25);padding:10px;border-radius:8px;text-align:center}
  .stat h4{margin-bottom:6px;color:#ffd985}
  .gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:8px;margin-top:12px}
  .gallery img{width:100%;height:96px;object-fit:cover;border-radius:8px;cursor:pointer;display:block}

  /* modal gallery */
  .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.75);z-index:100}
  .modal.open{display:flex}
  .modal .modal-content{max-width:92vw;max-height:86vh;border-radius:10px;overflow:hidden}
  .modal img{display:block;max-width:100%;max-height:86vh;object-fit:contain}

  /* responsive */
  @media(max-width:980px){.details{grid-template-columns:1fr 320px}}
  @media(max-width:820px){.details{grid-template-columns:1fr;gap:12px;padding:12px} .sidecard{order:2} .bio{order:1}}
</style>
</head>
<body>

  <!-- background + overlays -->
  <div class="flag-wrap" aria-hidden="true"><div class="flag" aria-hidden="true"></div></div>
  <div class="vignette" aria-hidden="true"></div>
  <div class="mist" aria-hidden="true"></div>
  <div class="embers" id="embers" aria-hidden="true"></div>

  <!-- topbar -->
  <div class="topbar" role="navigation" aria-label="Top controls">
    <div class="brand">Raila Odinga — Tribute</div>
    <div class="controls">
      <button class="btn" id="replayBtn" title="Replay Tribute">Replay Tribute</button>
      <button class="btn secondary" id="toggleAudio" title="Toggle background audio">Audio: Off</button>
      <button class="btn secondary" id="downloadBtn" title="Download portrait">Download Portrait</button>
    </div>
  </div>

  <!-- welcome overlay -->
  <div class="welcome" id="welcome" role="dialog" aria-label="Welcome to Tribute">
    <div class="intro-phrase">“A Legacy of Leadership — Raila Amolo Odinga”</div>
    <div class="welcome-card">
      <div class="welcome-title">Welcome to the Tribute</div>
      <div class="welcome-sub">A ceremonial showcase of leadership and legacy</div>
      <div class="enter-anim" aria-hidden="true"></div>
    </div>
  </div>

  <!-- main stage -->
  <main class="stage" id="stage" aria-live="polite">
    <section class="card" id="card" role="region" aria-label="Main tribute card">
      <h1 class="tribute-title">Rt. Hon. Raila Amolo Odinga</h1>

      <div class="portrait-rect" id="portraitRect" aria-label="Portrait area">
        <!-- Replace src with a rectangular portrait image -->
        <img id="portraitImg" src="https://files.catbox.moe/e3bp2l.jpg" alt="Portrait of Raila Odinga">
        <div class="overlay-label">Raila Amolo Odinga — Smile You Don't Own All The Problems</div>
      </div>

      <div class="candles" aria-hidden="true">
        <div class="candle"><div class="wax"></div><div class="wick"></div><div class="flame"></div></div>
        <div class="candle"><div class="wax"></div><div class="wick"></div><div class="flame"></div></div>
        <div class="candle"><div class="wax"></div><div class="wick"></div><div class="flame"></div></div>
      </div>

      <div class="quote" id="quoteText">Legacy Lives On — Forever in Our Hearts.</div>
      <div class="note">An honorary leadership tribute</div>
    </section>
  </main>

  <!-- details: biography + timeline + gallery + side stats -->
  <section class="details" aria-label="Details area">
    <div class="bio" id="bio">
      <h2>Biography</h2>
      <p><strong>Full name:</strong> Raila Amolo Odinga<br>
      <strong>Born:</strong> March 7, 1945 (example)<br>
      <strong>Known as:</strong> A leader, statesman, and advocate for democratic rights in Kenya.</p>

      <p>Raila Odinga is an influential Kenyan political leader whose career spans decades of public service, advocacy for multi-party democracy, and championing social and economic reforms. This tribute highlights his commitment to civic engagement, regional stability, and the empowerment of ordinary citizens.</p>

      <div class="timeline" aria-label="Timeline of milestones">
        <div class="timeline-item">
          <h3>1970s–1980s — Early career & activism</h3>
          <p>Engaged in public service and political organizing; notable for activism during the push for multi-party democracy.</p>
        </div>
        <div class="timeline-item">
          <h3>1990s — Political leadership emergence</h3>
          <p>Played a key role in opposition movements and democratic reforms in Kenya.</p>
        </div>
        <div class="timeline-item">
          <h3>2000s — National leadership</h3>
          <p>Served in senior government roles and advanced major infrastructure and social policies.</p>
        </div>
        <div class="timeline-item">
          <h3>2010s — Continued influence</h3>
          <p>Remained a central figure in Kenyan politics and advocacy, inspiring new generations of leaders.</p>
        </div>
      </div>
    </div>

    <aside class="sidecard" aria-label="Quick facts and gallery">
      <div>
        <h3 style="color:#ffd985;margin-bottom:8px">Quick Facts</h3>
        <div class="stats-row">
          <div class="stat"><h4>Role</h4><div>Statesman</div></div>
          <div class="stat"><h4>Region</h4><div>East Africa</div></div>
          <div class="stat"><h4>Influence</h4><div>National & Regional</div></div>
          <div class="stat"><h4>Legacy</h4><div>Democracy & Reform</div></div>
        </div>
      </div>

      <div style="margin-top:12px">
        <h3 style="color:#ffd985;margin-bottom:8px">Gallery</h3>
        <div class="gallery" id="gallery">
          <!-- Replace these sources with real image URLs as desired -->
          <img src="https://files.catbox.moe/e3bp2l.jpg" alt="Moment 1" data-full="https://files.catbox.moe/e3bp2l.jpg">
          <img src="https://files.catbox.moe/e3bp2l.jpg" alt="Moment 2" data-full="https://files.catbox.moe/e3bp2l.jpg">
          <img src="https://files.catbox.moe/e3bp2l.jpg" alt="Moment 3" data-full="https://files.catbox.moe/e3bp2l.jpg">
          <img src="https://files.catbox.moe/e3bp2l.jpg" alt="Moment 4" data-full="https://files.catbox.moe/e3bp2l.jpg">
        </div>
      </div>

      <div style="margin-top:12px">
        <button class="btn" id="moreBtn" style="width:100%">Read more / Print</button>
      </div>
    </aside>
  </section>

  <!-- gallery modal -->
  <div class="modal" id="modal" role="dialog" aria-modal="true" aria-label="Image viewer">
    <div class="modal-content" id="modalContent">
      <img src="" alt="Expanded gallery image" id="modalImg">
    </div>
  </div>

  <!-- audio (replace source with your legally hosted file) -->
  <audio id="score" preload="auto" loop>
    <source src="your-licensed-jamaica-farewell.mp3" type="audio/mpeg">
  </audio>

<script>
  /* ===== embers ===== */
  const embersEl = document.getElementById('embers');
  const EMBER_COUNT = 22;
  function spawnEmbers(){
    embersEl.innerHTML = '';
    for(let i=0;i<EMBER_COUNT;i++){
      const e = document.createElement('div'); e.className = 'ember';
      const size = 4 + Math.random()*12;
      e.style.width = size + 'px'; e.style.height = size + 'px';
      e.style.left = (5 + Math.random()*90) + '%';
      e.style.top = (60 + Math.random()*35) + '%';
      const dur = 9 + Math.random()*16;
      const delay = -(Math.random()*dur);
      e.style.animationDuration = dur + 's';
      e.style.animationDelay = delay + 's';
      embersEl.appendChild(e);
    }
  }
  spawnEmbers();
  window.addEventListener('resize', spawnEmbers);

  /* ===== variables ===== */
  const welcome = document.getElementById('welcome');
  const card = document.getElementById('card');
  const quoteText = document.getElementById('quoteText');
  const score = document.getElementById('score');
  const portraitImg = document.getElementById('portraitImg');
  const replayBtn = document.getElementById('replayBtn');
  const toggleAudioBtn = document.getElementById('toggleAudio');
  const downloadBtn = document.getElementById('downloadBtn');

  /* ===== portrait fallback ===== */
  portraitImg.addEventListener('error', () => {
    portraitImg.src = 'data:image/svg+xml;utf8,' + encodeURIComponent(
      '<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="700"><rect width="100%" height="100%" fill="#0b0b0b"/><g fill="#ffd985" font-family="Segoe UI, Arial"><text x="50%" y="46%" font-size="40" text-anchor="middle">Portrait Placeholder</text><text x="50%" y="56%" font-size="20" text-anchor="middle">Replace with your rectangular image</text></g></svg>'
    );
  });

  /* ===== quote rotation ===== */
  const quotes = [
    "Legacy Lives On — Forever in Our Hearts.",
    "Leadership is not about power, but purpose.",
    "A true patriot never abandons his people.",
    "Service to the people is the truest calling of a leader."
  ];
  let qIndex = 0;
  function rotateQuote(){
    quoteText.classList.remove('visible');
    setTimeout(()=>{
      qIndex = (qIndex + 1) % quotes.length;
      quoteText.textContent = quotes[qIndex];
      quoteText.classList.add('visible');
    }, 600);
  }
  setInterval(rotateQuote, 8000);

  /* ===== cinematic sequence ===== */
  const WELCOME_DURATION = 5000;
  const TRANSITION_DURATION = 900;
  function revealMain(){
    card.style.opacity = '1';
    card.style.transform = 'translateY(0)';
    // ensure first quote visible
    setTimeout(()=> quoteText.classList.add('visible'), 700);
    // show title animation is CSS-driven
  }

  function fadeInAudio(audio, target = 0.16, step = 0.01, interval = 160){
    try { audio.muted = true; } catch(e){}
    audio.volume = 0;
    audio.play().catch(()=>{/* may be blocked */});
    const tick = setInterval(()=>{
      if(audio.volume < target - 0.0001){
        audio.volume = Math.min(target, +(audio.volume + step).toFixed(3));
      } else clearInterval(tick);
    }, interval);
  }
  function tryUnmuteAndFade(audio, target = 0.16){
    try { audio.muted = false; fadeInAudio(audio, target); } catch(e){ try{ audio.muted = true; } catch(_){} }
  }

  window.addEventListener('load', () => {
    // show welcome, then fade and reveal
    setTimeout(() => {
      welcome.style.transition = `opacity ${TRANSITION_DURATION}ms ease`;
      welcome.style.opacity = '0';
      setTimeout(() => {
        try{ welcome.remove(); }catch(e){}
        revealMain();
        (async () => {
          try { score.muted = true; await score.play(); } catch(e){}
          finally {
            setTimeout(()=> tryUnmuteAndFade(score, 0.16), 700);
            toggleAudioBtn.textContent = 'Audio: On';
          }
        })();
      }, TRANSITION_DURATION + 60);
    }, WELCOME_DURATION);
  });

  /* ===== audio control toggling ===== */
  let audioOn = true;
  toggleAudioBtn.addEventListener('click', () => {
    if(!audioOn){
      tryUnmuteAndFade(score, 0.16);
      audioOn = true;
      toggleAudioBtn.textContent = 'Audio: On';
    } else {
      // fade out then pause
      const fadeOut = setInterval(()=>{
        if(score.volume > 0.02) score.volume = Math.max(0, +(score.volume - 0.02).toFixed(3));
        else { score.pause(); clearInterval(fadeOut); }
      }, 120);
      audioOn = false;
      toggleAudioBtn.textContent = 'Audio: Off';
    }
  });

  /* ===== replay button =====
     Restores the welcome overlay and replays sequence without full page reload.
  */
  replayBtn.addEventListener('click', () => {
    // reset visual states
    if(!document.body.contains(welcome)){
      // recreate welcome (safe simple clone)
      const newWelcome = document.createElement('div');
      newWelcome.className = 'welcome';
      newWelcome.id = 'welcome';
      newWelcome.innerHTML = '<div class="intro-phrase">“A Legacy of Leadership — Raila Amolo Odinga”</div>' +
        '<div class="welcome-card"><div class="welcome-title">Welcome to the Tribute</div><div class="welcome-sub">A ceremonial showcase of leadership and legacy</div><div class="enter-anim" aria-hidden="true"></div></div>';
      document.body.appendChild(newWelcome);
    }
    // hide card and reset
    card.style.opacity = '0'; card.style.transform = 'translateY(24px)';
    quoteText.classList.remove('visible');
    // replay after slight delay
    setTimeout(()=>{
      // reveal welcome overlay visually
      const w = document.getElementById('welcome');
      if(w){ w.style.opacity = '1'; }
      // schedule transition same as initial
      setTimeout(() => {
        if(w){ w.style.transition = `opacity ${TRANSITION_DURATION}ms ease`; w.style.opacity = '0'; }
        setTimeout(() => {
          try{ if(w) w.remove(); } catch(e){}
          revealMain();
          // restart audio if off
          try { score.currentTime = 0; score.muted = true; score.play().catch(()=>{}); } catch(e){}
          setTimeout(()=> tryUnmuteAndFade(score, 0.16), 700);
          toggleAudioBtn.textContent = 'Audio: On'; audioOn = true;
        }, TRANSITION_DURATION + 60);
      }, 600); // tiny delay so user sees welcome
    }, 120);
  });

  /* ===== download portrait button ===== */
  downloadBtn.addEventListener('click', () => {
    const src = portraitImg.src;
    if(!src) return;
    // create temporary link to download
    const a = document.createElement('a');
    a.href = src;
    a.download = 'portrait.jpg';
    // some browsers require blob for cross-origin; best if using same-origin images
    document.body.appendChild(a);
    a.click();
    a.remove();
  });

  /* ===== gallery modal logic ===== */
  const gallery = document.getElementById('gallery');
  const modal = document.getElementById('modal');
  const modalImg = document.getElementById('modalImg');

  gallery.addEventListener('click', (e) => {
    const target = e.target.closest('img');
    if(!target) return;
    const full = target.dataset.full || target.src;
    modalImg.src = full;
    modal.classList.add('open');
  });
  modal.addEventListener('click', () => {
    modal.classList.remove('open');
    modalImg.src = '';
  });

  /* ===== keyboard accessibility ===== */
  window.addEventListener('keydown', (e) => {
    if(e.code === 'Space'){
      e.preventDefault();
      if(score.paused){ score.play().catch(()=>{}); tryUnmuteAndFade(score, 0.16); audioOn = true; toggleAudioBtn.textContent = 'Audio: On'; }
      else { // fade out and pause
        const fade = setInterval(()=>{ if(score.volume > 0.02) score.volume = Math.max(0, +(score.volume - 0.02).toFixed(3)); else { score.pause(); clearInterval(fade);} }, 100);
        audioOn = false; toggleAudioBtn.textContent = 'Audio: Off';
      }
    } else if(e.key === 'Escape'){
      if(modal.classList.contains('open')) { modal.classList.remove('open'); modalImg.src = ''; }
    }
  });

  /* ===== print / more btn (simple) ===== */
  document.getElementById('moreBtn').addEventListener('click', ()=>{
    // open print dialog for the details area
    window.print();
  });

  /* ===== ensure first quote visible when page fully ready ===== */
  document.addEventListener('DOMContentLoaded', ()=> {
    // slight delay so CSS intro animation finishes
    setTimeout(()=>{ quoteText.classList.add('visible'); }, 1500);
  });

</script>
</body>
</html>
